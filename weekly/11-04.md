Wednesday, 6 November 2013
==================================
I just figured out how to use PhantomJS with codeception, and it works well. Yay!

Install phantomjs (I put it in a folder on my path):

    http://phantomjs.org/download.html

Run it:

    phantomjs --webdriver=4444

Tell codeception to use it. In acceptance.suite.yml:

    class_name: WebGuy
    modules:
        enabled:
            [ Selenium2 ]
        config:
            Selenium2:
                url: 'http://lkata/'
                browser: phantomjs
                capabilities:
                    unexpectedAlertBehaviour: 'accept'

It even takes screen shots when something fails. Nice!

It's failing on something that it should succeed with, though. When I click an OK button on the login dialog box, the "login" message changes to "logout". That takes a few milliseconds. Can I tell it to wait, somehow?

Yes. `$I->wait($millisecondsToWait);`  Simple!

One other issue. With authentication, I log in at the beginning of the process. As long as I'm in phantomjs, the sessions stick. Can I quit at the end? Apparently, the function 'phantom.exit' needs to be called. Can I run that in my _after function?

```php
    public function _after($test)
    {
        $test->executeInSelenium('exit');
    }
```

It doesn't work. Hmmm... When the Selenium2 driver quits, it should be running the close() method of the wdSession (which should be going to phantomjs). 

I can't really dig into this right now. just have to quit and restart phantom manually after each test...

On my Windows machine, it's not working at all. It comes up with an error: file_put_contents(C:\wamp\www\active\lkata\app\storage\meta/services.json): failed to  (the screenshot doesn't capture the rest)

Right. because I'm not on lkata, at the moment. I'm on kdb.dev.


### "Holy Grail" Layout

I've been struggling with a "Holy Grail" layout for a while. I've finally found a site that has exactly what I want, though, and I'm pulling it apart to see exactly what makes it tick. The site is here:

http://philipwalton.github.io/solved-by-flexbox/demos/holy-grail/

So far, I'm down to this:

```html
    <!doctype html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Document</title>

    <style type="text/css">

    html, body {
        margin:0;
        height: 100%;
    }

    *,*::before,*::after{
        -webkit-box-sizing:border-box;
        -moz-box-sizing:border-box;
        box-sizing:border-box
    }

    .HolyGrail{
        min-height: 100%;
    }

    .HolyGrail,.HolyGrail-body{
        display:-webkit-box;
        display:-webkit-flex;
        display:-moz-box;
        display:-ms-flexbox;
        -webkit-box-orient:vertical;
        -webkit-box-direction:normal;
        -webkit-flex-direction:column;
        -moz-box-orient:vertical;
        -moz-box-direction:normal;
        -ms-flex-direction:column;
        display:flex;
        flex-direction:column
    }
    .HolyGrail-body{
        padding:1.5em
    }
    .HolyGrail-content{
        margin:1.5em 0
    }
    .HolyGrail-nav{
        -webkit-box-ordinal-group:0;
        -webkit-order:-1;
        -moz-box-ordinal-group:0;
        -ms-flex-order:-1;
        order:-1
    }
    .HolyGrail-nav,.HolyGrail-ads{
        padding:1em;
        border-radius:3px;
        background:rgba(147,128,108,.1)
    }

    @media (min-width:42em){
        .HolyGrail-body{
            -webkit-box-orient:horizontal;
            -webkit-box-direction:normal;
            -webkit-flex-direction:row;
            -moz-box-orient:horizontal;
            -moz-box-direction:normal;
            -ms-flex-direction:row;
            flex-direction:row;
            -ms-flex-preferred-size:auto
        }
        .HolyGrail-body,.HolyGrail-content{
            -webkit-box-flex:1;
            -webkit-flex:1;
            -moz-box-flex:1;
            -ms-flex:1;
            flex:1
        }
        .HolyGrail-content{
            padding:0 1.5em;
            margin:0
        }
        .HolyGrail-nav,.HolyGrail-ads{
            -webkit-box-flex:0;
            -webkit-flex:0 0 12em;
            -moz-box-flex:0;
            -ms-flex:0 0 12em;
            flex:0 0 12em
        }
    }

    header{
        background-color: green;
        height: 90px;
    }

    footer {
        background-color: green;
        height: 40px;
    }

    .HolyGrail-body {
        padding: 10px;
        background-color: blue;
    }

    .HolyGrail-content {
        padding: 10px;
        background-color: orange;
    }

    .HolyGrail-nav {
        background-color: yellow;
    }

    .HolyGrail-ads {
        background-color: pink;
    }

    </style>

    </head>

    <body class="HolyGrail">
        <header>Header</header>
        <div class="HolyGrail-body">
            <main class="HolyGrail-content">Content

    lorem*40
            </main>
            <nav class="HolyGrail-nav">nav</nav>
            <aside class="HolyGrail-ads">Ads</aside>
        </div>
        <footer>Footer</footer>
        
    </body>
    </html>
```

Hmmmm... I really don't understand css. Apparently, this:

```css
    .HolyGrail {
        min-height:100%
    }
    .HolyGrail, .HolyGrail-body {
        display: flex;
        flex-direction: column
    }
    .HolyGrail-body {
        padding: 10px;
        background-color: blue;
    }
```

Is not the same as this:

```css
    .HolyGrail {
        min-height:100%
        display: flex;
        flex-direction: column
    }
    .HolyGrail-body {
        display: flex;
        flex-direction: column
        padding: 10px;
        background-color: blue;
    }
```

After a lot of trial and error, this seems to work:

```html
    <!doctype html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Document</title>

    <style type="text/css">

    body,html {
        margin:0
    }
    *,*::before,*::after {
        box-sizing:border-box
    }
    html {
        height:100%;
        color:#404040;
        font:300 1em/1.333 "proxima-nova",sans-serif
    }
    header {
        background-color: green;
        height: 50px;
    }
    footer {
        background-color: green;
        height: 30px;
    }
    .HolyGrail {
        min-height:100%
    }
    .HolyGrail, .HolyGrail-body {
        display: flex;
        flex-direction: column
    }
    .HolyGrail-body {
        padding: 10px;
        background-color: blue;
    }
    .HolyGrail-content {
        padding: 10px;
        background-color: orange;
    }
    .HolyGrail-nav {
        order: -1;
        padding: 10px;
        background-color: yellow;
    }
    .HolyGrail-ads {
        padding: 10px;
        background-color: pink;
    }
    @media (min-width:42em) {
        .HolyGrail-body {
            flex-direction:row;
        }
        .HolyGrail-body,.HolyGrail-content {
            flex:1
        }
        .HolyGrail-content {
            margin:0
        }
        .HolyGrail-nav,.HolyGrail-ads {
            flex:0 0 12em
        }
    }
    </style>

    </head>

    <body class="HolyGrail">
        <header>Header</header>
        <div class="HolyGrail-body">
            <main class="HolyGrail-content">Content
    Lorem*20
            </main>
            <nav class="HolyGrail-nav">nav
    Lorem*6
            </nav>
            <aside class="HolyGrail-ads">Ads
    Lorem*6
            </aside>
        </div>
        <footer>Footer</footer>
        
    </body>
    </html>
```

Let's try to pull that in to a bootstrapped template... 

It works there, too! Yay!




Thursday, 7 November 2013
==================================
I'm reading about how to create a pop-up menu. There is a very nice, simple example at:
http://d.alistapart.com/horizdropdowns/horizontal2.htm

It's also included as a standard component of jqueryui...




