Monday, 25 March 2013 
====================================

Trying to figure out how to handle errors... All messages, actually....

In my controller, I try to go to a page that doesn't exist. This should bring up a 404 error with some message text (eg, "Page doesNotExist was not found"). In some cases, I'll have custom errors. (eg, "Bad JSON string", etc.). I can just return empty objects, but I'd like to pass back something that indicates what went wrong.... Essentially, I'd like this:

    Return a 404 code in the header
    {"errors":["item doesNotExist was not found"]}
    {"errors":["vendor doesNotExist was not found for item 2"]}
    {"errors":["incorrectly formatted JSON string submitted","Unable to parse text"]}

On success, it's currently just passing back the data. This is probably OK for now, but in the future, I may want to have more control. I could see a case where I'm doing paging, and wanting to do something like this:

    {"data":[...several returned objects here...],
     "offset": 100,
     "limit": "20"}

Maybe there are better ways, though, and I'll come across them in due course.



Error Message Handling
-----------------------
From http://stackoverflow.com/questions/14455112/distinguish-between-validation-errors-in-laravel

Get an instance of a MessageBag object, that you can run through with a foreach loop:

    $messages = $validator->messages(); // Where $validator is your validator instance.
    $messages = $messages->all()

    foreach ($messages as $message) {
        print $message;
    }

You can also get error messages for a given attribute:

    $errors = $validation->errors->get('email');

and then loop through the errors

    foreach ($errors as $error) { print $error; }

or get all the error messages

    $errors = $validation->errors->all();

then loop through the error messages

    foreach ($errors as $error) { print $error; }


